# chsmesh.org production deployment
# Run this on your server.
#
# Security note:
# Automatic in-container updaters that mount /var/run/docker.sock
# are intentionally not used. Updates should run from the host using
# scripts/server-update.sh (or equivalent CI/CD deploy job).

services:
  chsmesh:
    image: ghcr.io/cstarlea/chsmesh:latest
    container_name: chsmesh
    user: "101:101"
    ports:
      - "8081:8080"
    read_only: true
    tmpfs:
      - /var/cache/nginx
      - /var/run
      - /tmp
    cap_drop:
      - ALL
    security_opt:
      - no-new-privileges:true
    restart: unless-stopped
